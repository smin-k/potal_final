<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
  <meta charset="UTF-8">
  <title>Form</title>
</head>
<body>
<div class="container">
  <div class="page-header">
    <h1 th:text="${post?.id} ? '게시글 상세' : '게시글 등록'"></h1>
  </div>
  <br/>
  <form method="POST" enctype="multipart/form-data">
    <input id="board_id" type="hidden" th:value="${post?.id}"/>
    <input id="board_create_date" type="hidden" th:value="${post?.createdDate}"/>
    생성 날짜 <input type="text" class="form-control input-sm" readonly
                 th:value="${post?.createdDate} ?
                                    ${#temporals.format(post.createdDate, 'yyyy-MM-dd HH:mm')} :
                                   ${post?.createdDate}"/>
    <br>
    <div>게시물 번호</div> <input name="id" type="text" class="form-control input-sm"
                         th:value="${post?.getId()}"/>
    <br>
    <div>제목</div> <input name="title" type="text" class="form-control input-sm"
                 th:value="${post?.title}"/>
    <br>
    <div>작성자:</div> <div th:text="${post.userInfo.getEmail()}"> </div>
    <br>
    <div>내용</div> <textarea name="content" class="form-control input-sm"
                    maxlength="140" rows="70" style="height: 200px;"
                    th:text="${post?.content}"></textarea>
          <span class="help-block"></span>
    <div sec:authorize="hasRole('ROLE_TEACHER')" class="pull-right">
      <button  th:if="!${post?.id}" type="submit" class="btn btn-primary" id="insert">
        저장
      </button>
      <button th:if="${post.getUserInfo().getEmail()} == ${name}" type="submit" class="btn btn-info" id="update">
        수정
      </button>
      <button th:if="${post.getUserInfo().getEmail()} == ${name}" type="submit" class="btn btn-danger" id="delete">
        삭제
      </button>
    </div>
    <div sec:authorize="hasRole('ROLE_STUDENT')" class="pull-right"> 제출정보
    <div>코멘트</div> <textarea name="content" class="form-control input-sm"   th:text="${home.getContent()}">
                              </textarea>
    </div>
>
    <div sec:authorize="hasRole('ROLE_STUDENT')" >
        <a th:if="${home}" th:href="@{'/post/homework/'+${post.getId()}+'/'+${home.getId()}}">
        과제 수정하기 </a>
     <a th:unless="${home}" th:href="@{'/post/homework/'+${post.getId()}+'/'+${home.getId()}}" id="insert_homework">과제 제출하기</a>
    </div>

    <div sec:authorize="hasRole('ROLE_TEACHER')" >
      <a th:href="@{'/post/homework/list/'+${post.getId()}+'/'}"> 제출 과제 확인 </a>
      <a>
        제출 과제 확인 </a>
    </div>


  </form>
  <!-- 목록으로 -->
  <div class="pull-left">
    <a href="/post/list" class="btn btn-success">목록으로</a>
  </div>

</div>
</body>
</html>